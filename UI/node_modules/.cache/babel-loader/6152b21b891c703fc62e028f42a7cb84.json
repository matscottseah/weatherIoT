{"remainingRequest":"/Users/matthewscott/Projects/vue-flickr/node_modules/babel-loader/lib/index.js!/Users/matthewscott/Projects/vue-flickr/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/matthewscott/Projects/vue-flickr/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matthewscott/Projects/vue-flickr/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matthewscott/Projects/vue-flickr/src/views/Home.vue","mtime":1588196285795},{"path":"/Users/matthewscott/Projects/vue-flickr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matthewscott/Projects/vue-flickr/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matthewscott/Projects/vue-flickr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matthewscott/Projects/vue-flickr/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IG15c3FsIGZyb20gJ215c3FsJzsKaW1wb3J0IEltYWdlQ2FyZCBmcm9tICdAL2NvbXBvbmVudHMvSW1hZ2VDYXJkLnZ1ZSc7CmltcG9ydCBjb25maWcgZnJvbSAnLi4vLi4vY29uZmlnJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdob21lJywKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZUNhcmQ6IEltYWdlQ2FyZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0YWc6ICcnLAogICAgICBpbWFnZXM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmZldGNoSW1hZ2VzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgX3RoaXMuaW1hZ2VzID0gcmVzcG9uc2UuZGF0YS5waG90b3MucGhvdG87CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnQW4gZXJyb3Igb2N1cnJlZDogJywgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hEQjogZnVuY3Rpb24gc2VhcmNoREIoKSB7CiAgICAgIHRoaXMuZmV0Y2hGcm9tREIoKTsKICAgIH0sCiAgICBmZXRjaEltYWdlczogZnVuY3Rpb24gZmV0Y2hJbWFnZXMoKSB7CiAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6ICdodHRwczovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgbWV0aG9kOiAnZmxpY2tyLnBob3Rvcy5zZWFyY2gnLAogICAgICAgICAgYXBpX2tleTogY29uZmlnLmFwaV9rZXksCiAgICAgICAgICB0YWdzOiB0aGlzLnRhZywKICAgICAgICAgIGV4dHJhczogJ3VybF9uLCBvd25lcl9uYW1lLCBkYXRlX3Rha2VuLCB2aWV3cycsCiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgZm9ybWF0OiAnanNvbicsCiAgICAgICAgICBub2pzb25jYWxsYmFjazogMSwKICAgICAgICAgIHBlcl9wYWdlOiAzMAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hGcm9tREI6IGZ1bmN0aW9uIGZldGNoRnJvbURCKCkgewogICAgICB2YXIgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woewogICAgICAgIGhvc3Q6IGNvbmZpZy5kYmhvc3QsCiAgICAgICAgdXNlcjogY29uZmlnLmRidXNlciwKICAgICAgICBwYXNzd29yZDogY29uZmlnLmRicGFzc3dvcmQsCiAgICAgICAgZGF0YWJhc2U6IGNvbmZpZy5kYm5hbWUKICAgICAgfSk7CiAgICAgIHBvb2wuZ2V0Q29ubmVjdGlvbihmdW5jdGlvbiAoZXJyLCBjb25uZWN0aW9uKSB7CiAgICAgICAgLy8gVXNlIHRoZSBjb25uZWN0aW9uCiAgICAgICAgY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUICogZnJvbSB1c2VyJywgZnVuY3Rpb24gKGVycm9yLCByZXN1bHRzLCBmaWVsZHMpIHsKICAgICAgICAgIC8vIEFuZCBkb25lIHdpdGggdGhlIGNvbm5lY3Rpb24uCiAgICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTsgLy8gSGFuZGxlIGVycm9yIGFmdGVyIHRoZSByZWxlYXNlLgoKICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7ZWxzZSBjb25zb2xlLmxvZyhyZXN1bHRzKTsKICAgICAgICAgIHByb2Nlc3MuZXhpdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,SAAA,MAAA,4BAAA;AACA,OAAA,MAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,WAAA,GACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OALA,EAMA,KANA,CAMA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,oBAAA,EAAA,KAAA;AACA,OARA;AASA,KAZA;AAaA,IAAA,QAbA,sBAaA;AACA,WAAA,WAAA;AACA,KAfA;AAgBA,IAAA,WAhBA,yBAgBA;AACA,aAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA,sCAFA;AAGA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,sBADA;AAEA,UAAA,OAAA,EAAA,MAAA,CAAA,OAFA;AAGA,UAAA,IAAA,EAAA,KAAA,GAHA;AAIA,UAAA,MAAA,EAAA,sCAJA;AAKA,UAAA,IAAA,EAAA,CALA;AAMA,UAAA,MAAA,EAAA,MANA;AAOA,UAAA,cAAA,EAAA,CAPA;AAQA,UAAA,QAAA,EAAA;AARA;AAHA,OAAA,CAAA;AAcA,KA/BA;AAgCA,IAAA,WAhCA,yBAgCA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,UAAA,CAAA;AACA,QAAA,IAAA,EAAA,MAAA,CAAA,MADA;AAEA,QAAA,IAAA,EAAA,MAAA,CAAA,MAFA;AAGA,QAAA,QAAA,EAAA,MAAA,CAAA,UAHA;AAIA,QAAA,QAAA,EAAA,MAAA,CAAA;AAJA,OAAA,CAAA;AAMA,MAAA,IAAA,CAAA,aAAA,CAAA,UAAA,GAAA,EAAA,UAAA,EAAA;AACA;AACA,QAAA,UAAA,CAAA,KAAA,CAAA,oBAAA,EAAA,UAAA,KAAA,EAAA,OAAA,EAAA,MAAA,EAAA;AACA;AACA,UAAA,UAAA,CAAA,OAAA,GAFA,CAGA;;AACA,cAAA,KAAA,EAAA,MAAA,KAAA,CAAA,KACA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,UAAA,OAAA,CAAA,IAAA;AACA,SAPA;AAQA,OAVA;AAWA;AAlDA;AAZA,CAAA","sourcesContent":["<template>\n  <div>\n    <nav class=\"navbar\">\n      <form class=\"searchbar\">\n        <label>\n          <span class='screen-reader-only'>Search:</span>\n          <input\n            v-model=\"tag\"\n            placeholder=\"Search for photos\"\n            type=\"text\"\n            class=\"searchbar-input\">\n        </label>\n        <button\n          type=\"submit\"\n          class=\"btn btn--green btn--go\"\n          @click.prevent=\"searchDB\">\n            Go\n        </button>\n      </form>\n    </nav>\n   <div class=\"wrapper\">\n      <p v-if=\"loading\" class=\"text-centered\">\n        Loading...\n      </p>\n      <ul v-else class=\"image-card-grid\">\n        <image-card\n          v-for=\"image in images\"\n          :key=\"image.id\"\n          :image=\"image\" />\n      </ul>\n   </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport mysql from 'mysql';\nimport ImageCard from '@/components/ImageCard.vue';\nimport config from '../../config';\n\nexport default {\n  name: 'home',\n  components: {\n    ImageCard,\n  },\n  data() {\n    return {\n      loading: false,\n      tag: '',\n      images: [],\n    };\n  },\n  methods: {\n    search() {\n      this.loading = true;\n      this.fetchImages()\n        .then((response) => {\n          console.log(response);\n          this.images = response.data.photos.photo;\n          this.loading = false;\n        })\n        .catch((error) => {\n          console.log('An error ocurred: ', error);\n        });\n    },\n    searchDB() {\n      this.fetchFromDB();\n    },\n    fetchImages() {\n      return axios({\n        method: 'get',\n        url: 'https://api.flickr.com/services/rest',\n        params: {\n          method: 'flickr.photos.search',\n          api_key: config.api_key,\n          tags: this.tag,\n          extras: 'url_n, owner_name, date_taken, views',\n          page: 1,\n          format: 'json',\n          nojsoncallback: 1,\n          per_page: 30,\n        },\n      });\n    },\n    fetchFromDB() {\n      var pool = mysql.createPool({\n          host: config.dbhost,\n          user: config.dbuser,\n          password: config.dbpassword,\n          database: config.dbname\n      });\n      pool.getConnection(function (err, connection) {\n        // Use the connection\n        connection.query('SELECT * from user', function (error, results, fields) {\n          // And done with the connection.\n          connection.release();\n          // Handle error after the release.\n          if (error) throw error;\n          else console.log(results);\n          process.exit();\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.screen-reader-only {\n  height: 1px;\n  width: 1px;\n  position: absolute;\n  left: -100000px;\n}\n.text-centered {\n  text-align: center;\n}\n.wrapper {\n  margin: 0 auto;\n  max-width: 800px;\n  @media only screen and (max-width: 799px) {\n    max-width: 100%;\n    margin: 0 1.5rem;\n  }\n}\n.image-card-grid {\n  list-style: none;\n  margin: .5rem 0;\n  padding: 0;\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n}\n.navbar {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem;\n  background: #F0F0F0;\n}\n.searchbar {\n  width: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  @media only screen and (max-width: 549px) {\n    width: 100%;\n    label {\n      width: 80%;\n    }\n  }\n}\n.searchbar-input {\n  padding: .5rem 1rem;\n  border-radius: 20px;\n  font-size: 1rem;\n  border: 1px solid gray;\n  min-width: 300px;\n  @media only screen and (max-width: 549px) {\n    min-width: 0;\n    width: 100%;\n  }\n}\n.btn {\n  padding: .5rem 1rem;\n  font-size: 1rem;\n  border-radius: 20px;\n  background: transparent;\n  border: none;\n}\n.btn--green {\n  background: #42b983;\n  color: white;\n  font-weight: bold;\n}\n.btn--go {\n  padding: .5rem 2rem;\n  margin-left: 1rem;\n}\n</style>\n"],"sourceRoot":"src/views"}]}